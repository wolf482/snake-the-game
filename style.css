apiVersion: k8s.keycloak.org/v2alpha1
kind: Keycloak
metadata:
  name: rhdh-kcv
spec:
  podTemplate:
    spec:
      containers:
      - name: keycloak
        lifecycle:
          preStart:
            exec:
              command:
              - /bin/sh
              - -c
              - |
                # Make the secret file executable and source it
                chmod +x /vault/secrets.sh
                source /vault/secrets.sh
                echo "Secrets sourced successfully"
        args:
        - --verbose
        - start
