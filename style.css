SELECT 
    pid,
    usename AS username,
    datname AS database,
    client_addr AS ip_address,
    application_name,
    backend_start,
    state,
    query
FROM pg_stat_activity
WHERE client_addr IS NOT NULL;
