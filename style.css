SELECT 
    CASE 
        WHEN client_addr IS NULL AND backend_type = 'client backend' THEN 'local'
        WHEN client_addr IS NULL THEN backend_type
        ELSE client_addr::text
    END AS connection_origin,
    count(*)
FROM pg_stat_activity
GROUP BY connection_origin;
